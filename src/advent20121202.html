

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Dart VM Advent Calendar 2012 12/02 &mdash; Dart VM Overview 1.0 documentation</title>
    
    <link rel="stylesheet" href="../static/haiku.css" type="text/css" />
    <link rel="stylesheet" href="../static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/print.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../static/jquery.js"></script>
    <script type="text/javascript" src="../static/underscore.js"></script>
    <script type="text/javascript" src="../static/doctools.js"></script>
    <script type="text/javascript" src="../_static/theme_extras.js"></script>
    <link rel="top" title="Dart VM Overview 1.0 documentation" href="../index.html" />
    <link rel="up" title="Dart VM index" href="advent201212index.html" />
    <link rel="prev" title="Dart VM Advent Calendar 2012 12/01" href="advent20121201.html" /> 
  </head>
  <body>
      <div class="header"><h1 class="heading"><a href="../index.html">
          <span>Dart VM Overview 1.0 documentation</span></a></h1>
        <h2 class="heading"><span>Dart VM Advent Calendar 2012 12/02</span></h2>
      </div>
      <div class="topnav">
      
        <p>
        «&#160;&#160;<a href="advent20121201.html">Dart VM Advent Calendar 2012 12/01</a>
        &#160;&#160;::&#160;&#160;
        <a class="uplink" href="../index.html">Contents</a>
        </p>

      </div>
      <div class="content">
        
        
  <div class="section" id="dart-vm-advent-calendar-2012-12-02">
<h1>Dart VM Advent Calendar 2012 12/02<a class="headerlink" href="#dart-vm-advent-calendar-2012-12-02" title="Permalink to this headline">¶</a></h1>
<div class="section" id="dart-vm">
<h2>Dart VMのビルド方法<a class="headerlink" href="#dart-vm" title="Permalink to this headline">¶</a></h2>
<p>ビルド方法を紹介します。</p>
<p>Linuxを前提に話を進めます。 私の環境は、Ubuntu12 ia32です。</p>
</div>
<div class="section" id="id1">
<h2>Dart VMのソースコード取得<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h2>
<p>ソースコードの取得方法は、以下のURLでも紹介しています。gitでの取得方法は、URLを参照ください。</p>
<p><a class="reference external" href="http://code.google.com/p/dart/wiki/GettingTheSource">http://code.google.com/p/dart/wiki/GettingTheSource</a></p>
<p>Dart VMのソースコードは、gclientを使ってダウンロードします。</p>
<p>Dartの関連すべてをダウンロードしてくるので、結構時間がかかります。</p>
<p>gclientの取得方法:</p>
<div class="highlight-python"><pre>$ svn co http://src.chromium.org/svn/trunk/tools/depot_tools
$ ls
  depot_tools</pre>
</div>
<p>Dartのソースコード取得&amp;更新方法:</p>
<div class="highlight-python"><pre>$ export PATH=/home/elise/language/dart/depot_tools:$PATH
$ gclient config http://dart.googlecode.com/svn/branches/bleeding_edge/deps/all.deps
$ gclient sync
$ ls
  dart</pre>
</div>
<p>ソースコードの取得先は2ヶ所あります。trunkとbleeding_edgeです。:</p>
<div class="highlight-python"><pre>gclient config http://dart.googlecode.com/svn/trunk/deps/all.deps
gclient config http://dart.googlecode.com/svn/branches/bleeding_edge/deps/all.deps</pre>
</div>
<p>trunkは、テストでALLOKになった単位で、bleeding_edgeからmergeして管理しているようです。</p>
<p>bleeding_edgeは毎日更新されるリポジトリで、以下のbuildbotで様子が見れます。</p>
<p><a class="reference external" href="http://build.chromium.org/p/client.dart/console">http://build.chromium.org/p/client.dart/console</a></p>
</div>
<div class="section" id="id2">
<h2>Dart VMのビルド<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h2>
<p>ビルド方法は以下のURLで紹介しています。デフォルトではDebugビルドです。</p>
<p><a class="reference external" href="http://code.google.com/p/dart/wiki/Building">http://code.google.com/p/dart/wiki/Building</a></p>
<p>ビルドは、build.pyというスクリプトを使用します。</p>
<p>Dartのパッケージすべてをビルドする場合</p>
<div class="highlight-python"><pre>$ ls
  dart
$ cd dart
$ ./tools/build.py --mode=release --arch=ia32
$ ls out
  ReleaseIA32</pre>
</div>
<p>Dart VMのみをビルドする場合</p>
<div class="highlight-python"><pre>$ ls
  dart
$ cd dart/runtime
$ ../tools/build.py --mode=release --arch=ia32
$ ls out
  ReleaseIA32
$ ls out/ReleaseIA32
  dart
  dart_no_snapshot
  gen_snapshot
  packages
  process_test
  run_vm_tests</pre>
</div>
<p>オプションの指定で切り替えられます。 archの指定は、なくてもいいかも。</p>
<p>デフォルトではDebugビルドなので、Release版の場合、release指定が必須です。</p>
<p>ビルドが終わったら、適当にパスを通しておくことをおすすめします。</p>
<div class="highlight-python"><pre>$ export PATH=xxx/dart/runtime/out/ReleaseIA32
$ export PATH=xxx/dart/out/ReleaseIA32
$ export PATH=xxx/dart/out/ReleaseIA32/dart-sdk/bin</pre>
</div>
<p>dart-sdk、たぶんよく配布されるDartSDKと呼ばれるものだとおもいます。</p>
<p>その中には、dart_analyzer、dartdoc, pubが入っています。</p>
<p>build.py オプションの一覧</p>
<div class="highlight-python"><pre>$ ./build.py  --help
Usage: build.py [options]

Options:
  -h, --help            show this help message and exit
  -m [all,debug,release], --mode=[all,debug,release]
                        Build variants (comma-separated).
  -v, --verbose         Verbose output.
  -a [all,ia32,x64,simarm,arm], --arch=[all,ia32,x64,simarm,arm]
                        Target architectures (comma-separated).
  --os=[all,host,android]
                        Target OSs (comma-separated).
  -j 8                  The number of parallel jobs to run.
  --devenv=DEVENV       Path containing devenv.com on Windows
  --executable=EXECUTABLE
                        Name of the devenv.com/msbuild executable on Windows
                        (varies for different versions of Visual Studio)</pre>
</div>
</div>
<div class="section" id="id3">
<h2>その他<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h2>
<p>ビルド環境は、gypで管理されています。</p>
<p>gypは、Linuxのみなので、他のプラットフォームでのビルドは不明。</p>
<p>Dart自体は、ia32 or x64の、Linux, MacOS, Windowsに対応しています。</p>
<p>また、おもしろいことに、Linux ia32環境から、android向けにクロスビルドすることもできます。</p>
<p>以下のURLでクロスビルド方法を解説しています。</p>
<p><a class="reference external" href="http://code.google.com/p/dart/wiki/Android">http://code.google.com/p/dart/wiki/Android</a></p>
<p>また、私がAndroid on DartVMを試したときのことも紹介します。</p>
<p><a class="reference external" href="http://www.slideshare.net/nothingcosmos/yokohamapf25-nothingcosmos">http://www.slideshare.net/nothingcosmos/yokohamapf25-nothingcosmos</a></p>
</div>
</div>


      </div>
      <div class="bottomnav">
      
        <p>
        «&#160;&#160;<a href="advent20121201.html">Dart VM Advent Calendar 2012 12/01</a>
        &#160;&#160;::&#160;&#160;
        <a class="uplink" href="../index.html">Contents</a>
        </p>

      </div>


    <div class="footer">
        &copy; Copyright 2012, nothingcosmos.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>

<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-15223787-5']);
  _gaq.push(['_trackPageview']);

  (function() {
   var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
   ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
   var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
   })();

</script>


  </body>
</html>