

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Dart VM Advent Calendar 2012 12/13 &mdash; Dart VM Overview 1.0 documentation</title>
    
    <link rel="stylesheet" href="../static/haiku.css" type="text/css" />
    <link rel="stylesheet" href="../static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/print.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../static/jquery.js"></script>
    <script type="text/javascript" src="../static/underscore.js"></script>
    <script type="text/javascript" src="../static/doctools.js"></script>
    <script type="text/javascript" src="../_static/theme_extras.js"></script>
    <link rel="top" title="Dart VM Overview 1.0 documentation" href="../index.html" />
    <link rel="up" title="Dart VM index" href="advent201212index.html" />
    <link rel="next" title="Dart VM Advent Calendar 2012 12/14" href="advent20121214.html" />
    <link rel="prev" title="Dart VM Advent Calendar 2012 12/12" href="advent20121212.html" /> 
  </head>
  <body>
      <div class="header"><h1 class="heading"><a href="../index.html">
          <span>Dart VM Overview 1.0 documentation</span></a></h1>
        <h2 class="heading"><span>Dart VM Advent Calendar 2012 12/13</span></h2>
      </div>
      <div class="topnav">
      
        <p>
        «&#160;&#160;<a href="advent20121212.html">Dart VM Advent Calendar 2012 12/12</a>
        &#160;&#160;::&#160;&#160;
        <a class="uplink" href="../index.html">Contents</a>
        &#160;&#160;::&#160;&#160;
        <a href="advent20121214.html">Dart VM Advent Calendar 2012 12/14</a>&#160;&#160;»
        </p>

      </div>
      <div class="content">
        
        
  <div class="section" id="dart-vm-advent-calendar-2012-12-13">
<h1>Dart VM Advent Calendar 2012 12/13<a class="headerlink" href="#dart-vm-advent-calendar-2012-12-13" title="Permalink to this headline">¶</a></h1>
<div class="section" id="benchmark-and-performance-tips">
<h2>Benchmark and Performance Tips<a class="headerlink" href="#benchmark-and-performance-tips" title="Permalink to this headline">¶</a></h2>
<p>Dart VMでは、Benchmark harnessというリポジトリで
js向けベンチマークのOctaneの一部をdartに移植したベンチマークを公開しており、手軽に試すことができます。</p>
<p><a class="reference external" href="https://github.com/dart-lang/benchmark_harness.git">https://github.com/dart-lang/benchmark_harness.git</a></p>
<p>試す場合は、pubというdart-sdkに付属したスクリプトが必要になります。</p>
<p>下記で、sdk-binにパスを通します。:</p>
<div class="highlight-python"><pre>$ export PATH=xxx/dart-sdk/bin</pre>
</div>
</div>
<div class="section" id="pub-install">
<h2>pub installの前後<a class="headerlink" href="#pub-install" title="Permalink to this headline">¶</a></h2>
<p>pubコマンドを使用すると、手軽にdartのパッケージの環境を整えることができます。</p>
<p>あんまり試してないので、詳しいことは不明です。</p>
<p>以下のURLで解説しています。</p>
<p><a class="reference external" href="http://pub.dartlang.org/doc/">http://pub.dartlang.org/doc/</a></p>
<p>前</p>
<div class="highlight-python"><pre>$ cd benchmark_harness/
$ ls
  README.md  example  lib  pubspec.yaml</pre>
</div>
<p>後</p>
<div class="highlight-python"><pre>$ pub install
  Resolving dependencies...
  Dependencies installed!

$ ls
  README.md  example  lib  packages  pubspec.lock  pubspec.yaml</pre>
</div>
<p>上記で、benchmark harnessのパッケージのインストールが完了し、ベンチマークを試すことができます。</p>
</div>
<div class="section" id="dart-benchmark-harness">
<h2>dart Benchmark harness<a class="headerlink" href="#dart-benchmark-harness" title="Permalink to this headline">¶</a></h2>
<p>お試し。</p>
<div class="highlight-python"><pre>$ cd benchmark_harness/example
$ dart DeltaBlue.dart
  DeltaBlue(RunTime): 2728.512960436562 us.
$ dart Template.dart
  Template(RunTime): 0.5470164764097777 us.
$ dart Richards.dart
  Richards(RunTime): 2212.3893805309735 us.</pre>
</div>
<p>最近のnewsによると、上記DeltaBlueとRichardsは、V8と比較して50%高速に動作するのだとか。</p>
<img alt="../images/dart_optimize.png" src="../images/dart_optimize.png" />
<p>JavaScript BenchmarkのOctaneはスコアで結果が帰ってくるのに、上記benchmark_harnessのサンプルは実行時間？で結果を返すためよくわかりませんね。</p>
</div>
<div class="section" id="dart">
<h2>Dartのプログラムで気をつけること。<a class="headerlink" href="#dart" title="Permalink to this headline">¶</a></h2>
<p>Dart VMの特徴の一つに、SmallTalk由来の概念だと思うのですが、
実行時の型に応じてメソッドが変わります。実行時のDynamic Typingです。</p>
<p>Javaであれば、多相性により呼び出し先が複数ありえるのは、interfaceを実装したクラスが複数あるときなど、
明示的にわかるかと思います。</p>
<p>しかしDart VMは、すべてのInstanceCall(+や-などのoperatorも含む、operator overloadといいながら、InstanceCallのOverride)
が多相性の性質を持つことにより、実行時のDynamic Typingを実現しています。</p>
<p>そのため、意図しない多相性には注意が必要です。</p>
<p>特にボトルネックとなる処理への混入には注意が必要でしょう。</p>
<p>例をあげます fibo3.dart</p>
<div class="highlight-python"><pre>fibo(var n) {
  if (n &lt; 2) {
    return n;
  } else {
    return fibo(n - 1) + fibo(n - 2);
  }
}

main() {
  fibo(2);
  fibo(2.0);
  print("ret = ${gettime(() =&gt; print(fibo(40)))} ms");
}</pre>
</div>
<p>概要でも示したfiboのコードの型をintからvarに変えました。</p>
<p>そのため、fiboの引数にdouble型を与えても実行できます。 また、DartEditorでwarningはでません。</p>
<p>結果は以下です。</p>
<div class="highlight-python"><pre>$ dart fibo.dart
102334155
ret = 945 ms
$ dart fibo3.dart
102334155
ret = 3053 ms       &lt;-- int型の3倍</pre>
</div>
<p>なぜ遅くなっているかというと、fibo(2.0)のところが原因です。</p>
<p>2.0を引数に与えてしまったため、fibo関数は、int型とdouble型を実行時の型情報として収集します。</p>
<p>そのため、JITコンパイル(最適化)の際には、int型とdouble型の両方で動作するようにコンパイルします。</p>
<p>javaでいうと、interfaceを実装した複数のクラスのメソッドを呼び分けるようなものだと思います。</p>
</div>
<div class="section" id="polymorphicinstancecall">
<h2>PolymorphicInstanceCall<a class="headerlink" href="#polymorphicinstancecall" title="Permalink to this headline">¶</a></h2>
<p>基本はperf等でボトルネックがどうなっているのか確認することですが、プロファイル以外の方法を紹介します。</p>
<p>中間表現を比較してみます。</p>
<div class="highlight-python"><pre>// fibo3.dart
0: B0[graph] {
      v0 &lt;- Constant:29(#null)
      v1 &lt;- Parameter:30(0) {PT: dynamic} {PCid: dynamic}
}
  2: B1[target]
  4:     CheckStackOverflow:2()
  6:     v2 &lt;- Constant:4(#2) {PT: _Smi@0x36924d72} {PCid: _Smi@0x36924d72} [2, 2]
  7:     ParallelMove eax &lt;- S-1, ecx &lt;- edx, S+0 &lt;- edx
  8:     Branch if RelationalOp:5(&lt;, v1, v2 IC[2: _Smi@0x36924d72, _Smi@0x36924d72 #587 | _Double@0x36924d72, _Smi@0x36924d72 #3]) goto (2, 3) env={ v1 [S-1], v1 [S-1], v2 [C] }
 10: B2[target]
 11:     ParallelMove eax &lt;- S-1
 12:     Return:8(v1)
 14: B3[target] ParallelMove ecx &lt;- S-1, eax &lt;- S+0
 16:     PushArgument:10(v1) {PCid: dynamic}
 18:     v3 &lt;- Constant:11(#1) {PT: _Smi@0x36924d72} {PCid: _Smi@0x36924d72} [1, 1]
 20:     PushArgument:12(v3) {PCid: dynamic}
 22:     v4 &lt;- PolymorphicInstanceCall:31(-, v1, v3 IC[2: _Smi@0x36924d72, _Smi@0x36924d72 #309 | _Double@0x36924d72, _Smi@0x36924d72 #1]) {PT: dynamic} {PCid: dynamic} env={ v1 [S-1], a0, a1 }
 23:     ParallelMove eax &lt;- eax
 24:     PushArgument:14(v4) {PCid: dynamic}
 26:     v5 &lt;- StaticCall:15(fibo v4) {PT: dynamic} {PCid: dynamic} env={ v1 [S-1], a0 }
 27:     ParallelMove eax &lt;- eax
 28:     PushArgument:16(v5) {PCid: dynamic}
 29:     ParallelMove eax &lt;- S-1
 30:     PushArgument:18(v1) {PCid: dynamic}
 31:     ParallelMove ecx &lt;- S+0
 32:     PushArgument:20(v2) {PCid: dynamic}
 34:     v7 &lt;- PolymorphicInstanceCall:32(-, v1, v2 IC[2: _Smi@0x36924d72, _Smi@0x36924d72 #276 | _Double@0x36924d72, _Smi@0x36924d72 #1]) {PT: dynamic} {PCid: dynamic} env={ v1 [S-1], a0, a1, a2 }
 35:     ParallelMove eax &lt;- eax
 36:     PushArgument:22(v7) {PCid: dynamic}
 38:     v8 &lt;- StaticCall:23(fibo v7) {PT: dynamic} {PCid: dynamic} env={ v1 [S-1], a0, a1 }
 39:     ParallelMove eax &lt;- eax
 40:     PushArgument:24(v8) {PCid: dynamic}
 42:     v9 &lt;- PolymorphicInstanceCall:33(+, v5, v8 IC[2: _Smi@0x36924d72, _Smi@0x36924d72 #273 | _Double@0x36924d72, _Double@0x36924d72 #1]) {PT: dynamic} {PCid: dynamic} env={ v1 [S-1], a0, a1 }
 43:     ParallelMove eax &lt;- eax
 44:     Return:26(v9)</pre>
</div>
<p>お馴染みのfibo(int)の中間表現です。</p>
<div class="highlight-python"><pre>// fibo.dart
0: B0[graph] {
      v0 &lt;- Constant:29(#null)
      v1 &lt;- Parameter:30(0) {PT: dynamic} {PCid: dynamic}
}
  2: B1[target] ParallelMove eax &lt;- S-1
  4:     CheckStackOverflow:2()
  6:     v2 &lt;- Constant:4(#2) {PT: _Smi@0x36924d72} {PCid: _Smi@0x36924d72} [2, 2]
  8:     CheckSmi:5(v1) env={ v1 [eax], v1 [eax], v2 [C] }
 10:     Branch if RelationalOp:5(&lt;, v1, v2 IC[1: _Smi@0x36924d72, _Smi@0x36924d72 #588]) goto (2, 3)
 12: B2[target]
 13:     ParallelMove eax &lt;- eax
 14:     Return:8(v1)
 16: B3[target]
 18:     v3 &lt;- Constant:11(#1) {PT: _Smi@0x36924d72} {PCid: _Smi@0x36924d72} [1, 1]
 20:     ParallelMove ecx &lt;- eax
 20:     v4 &lt;- BinarySmiOp:13(-, v1, v3) {PT: _Smi@0x36924d72} {PCid: _Smi@0x36924d72} [1, 1073741822] -o
 22:     PushArgument:14(v4) {PCid: dynamic}
 24:     v5 &lt;- StaticCall:15(fibo v4) {PT: dynamic} {PCid: dynamic} env={ v1 [S-1], a0 }
 25:     ParallelMove eax &lt;- eax
 26:     ParallelMove ecx &lt;- S-1, S+0 &lt;- eax
 26:     v7 &lt;- BinarySmiOp:21(-, v1, v2) {PT: _Smi@0x36924d72} {PCid: _Smi@0x36924d72} [0, 1073741821] -o
 28:     PushArgument:22(v7) {PCid: dynamic}
 30:     v8 &lt;- StaticCall:23(fibo v7) {PT: dynamic} {PCid: dynamic} env={ v1 [S-1], v5 [S+0], a0 }
 31:     ParallelMove ecx &lt;- eax, eax &lt;- S+0
 32:     CheckSmi:25(v5) env={ v1 [S-1], v5 [eax], v8 [ecx] }
 34:     CheckSmi:25(v8) env={ v1 [S-1], v5 [eax], v8 [ecx] }
 36:     ParallelMove edx &lt;- eax
 36:     v9 &lt;- BinarySmiOp:25(+, v5, v8) {PT: _Smi@0x36924d72} {PCid: _Smi@0x36924d72} [-inf, +inf] +o env={ v1 [S-1], v5 [eax], v8 [ecx] }
 37:     ParallelMove eax &lt;- edx
 38:     Return:26(v9)</pre>
</div>
<p>ざっくり、最後のfobo(n-1) + fibo(n-2)の部分を比較してみます。</p>
<div class="highlight-python"><pre>// fibo3()
39:     ParallelMove eax &lt;- eax
40:     PushArgument:24(v8) {PCid: dynamic}
42:     v9 &lt;- PolymorphicInstanceCall:33(+, v5, v8 IC[2: _Smi@0x36924d72, _Smi@0x36924d72 #273 | _Double@0x36924d72, _Double@0x36924d72 #1]) {PT: dynamic} {PCid: dynamic} env={ v1 [S-1], a0, a1 }
43:     ParallelMove eax &lt;- eax
44:     Return:26(v9)

// fibo()
32:     CheckSmi:25(v5) env={ v1 [S-1], v5 [eax], v8 [ecx] }
34:     CheckSmi:25(v8) env={ v1 [S-1], v5 [eax], v8 [ecx] }
36:     ParallelMove edx &lt;- eax
36:     v9 &lt;- BinarySmiOp:25(+, v5, v8) {PT: _Smi@0x36924d72} {PCid: _Smi@0x36924d72} [-inf, +inf] +o env={ v1 [S-1], v5 [eax], v8 [ecx] }
37:     ParallelMove eax &lt;- edx
38:     Return:26(v9)</pre>
</div>
<p>Smi型とdouble型を取りうる、fibo3のほうは、PolymorphicInstanceCall中間表現にあっており、</p>
<p>Smi型のみ取りうるfibi()は、BinarySmiOp中間表現になっています。</p>
<p>この差は大きいです。</p>
<p>fibo3() PolymorphicInstalceCall</p>
<div class="highlight-python"><pre>0xb2f88d59    50                     push eax       // 引数をpush
0xb2f88d5a    8b442404               mov eax,[esp+0x4]
0xb2f88d5e    bf28000000             mov edi,0x28   // Smi型をload
0xb2f88d63    a801                   test al,0x1    // 引数がSmi型か？
0xb2f88d65    7404                   jz 0xb2f88d6b
0xb2f88d67    0fb77801               movzx_w edi,[eax+0x1]
0xb2f88d6b    83ff28                 cmp edi,0x28   // Smi型かチェック
0xb2f88d6e    0f8512000000           jnz 0xb2f88d86 // Smi型でなければ、double型チェックへ
0xb2f88d74    ba19cc12b3             mov edx,0xb312cc19  Array[2, 2, null]
0xb2f88d79    e84a763702             call 0xb53003c8  [stub: CallStaticFunction] //Smi型でcall
0xb2f88d7e    83c408                 add esp,0x8
0xb2f88d81    e916000000             jmp 0xb2f88d9c  // goto return
0xb2f88d86    83ff2b                 cmp edi,0x2b    // double型 check
0xb2f88d89    0f8536000000           jnz 0xb2f88dc5  // goto deopt , double型でない。
0xb2f88d8f    ba19cc12b3             mov edx,0xb312cc19  Array[2, 2, null]
0xb2f88d94    e82f763702             call 0xb53003c8  [stub: CallStaticFunction] //double型でcall
0xb2f88d99    83c408                 add esp,0x8

//return
0xb2f88d9c</pre>
</div>
<p>PolymorhicInstalceCallのほうは、2つの呼び出し候補があるため、Smi型か判定し、Smi型であればSmi型のfiboをcall</p>
<p>double型か判定し、double型であればdouble型のfiboをcall</p>
<p>どちらでもない場合は、deoptimizationをcallします。</p>
<p>fibo() BinarySmiOp</p>
<div class="highlight-python"><pre>0xb3048ad2    89c1                   mov ecx,eax
0xb3048ad4    8b45f8                 mov eax,[ebp-0x8]
0xb3048ad7    a801                   test al,0x1         // Smi check
0xb3048ad9    0f8533000000           jnz 0xb3048b12      // goto notSmi deopt
0xb3048adf    f6c101                 test_b ecx,0x1      // Smi check
0xb3048ae2    0f852f000000           jnz 0xb3048b17      // goto notSmi deopt
0xb3048ae8    89c2                   mov edx,eax
0xb3048aea    03d1                   add edx,ecx         // add
0xb3048aec    0f802a000000           jo 0xb3048b1c       // goto overflow deopt</pre>
</div>
<p>意図せずPolymorphicInstanceCallになった場合には、BinarySmi演算のおよそ3倍遅いと思ったほうがよいでしょう。</p>
<p>上記のようにならないためには、&#8211;print-flow-graphオプションを指定して、中間表現をダンプした後、</p>
<p>複数の型が候補になっているInstanceCallがないか確認すればOKです。</p>
<p>例 )</p>
<div class="highlight-python"><pre>34:     v7 &lt;- PolymorphicInstanceCall:32(-, v1, v2 IC[2: _Smi@0x36924d72, _Smi@0x36924d72 #276 | _Double@0x36924d72, _Smi@0x36924d72 #1]) {PT: dynamic} {PCid: dynamic}
                                                   ^ ここ</pre>
</div>
<p>中間表現をダンプして、適当に&#8221;IC[2&#8221;等でgrepすれば見つけられます。</p>
</div>
<div class="section" id="aobench">
<h2>aobenchの例<a class="headerlink" href="#aobench" title="Permalink to this headline">¶</a></h2>
<p>dart版aobenchを例に、polymorphicIntanceCallを探してみます。</p>
<p>dart:core__StringBufferImpl&#64;0x36924d72_add</p>
<div class="highlight-python"><pre>8:     v3 &lt;- PolymorphicInstanceCall:52(toString, v2 IC[2: _Smi@0x36924d72 #99 | _OneByteString@0x36924d72 #150]) {PT: dynamic} {PCid: dynamic}</pre>
</div>
<p>StringBufferクラスのaddメソッド、特にtoSTringなどはしょうがないかなと思います。</p>
<p>toStringは例外ですね。</p>
<p>dart:core__HashMapImpl&#64;0x36924d72__probeForLookup&#64;0x36924d72</p>
<div class="highlight-python"><pre>74:     Branch if EqualityCompare:61(v17 == v2 IC[2: _Smi@0x36924d72, _Smi@0x36924d72 #3 | _DeletedKeySentinel@0x36924d72, _Smi@0x36924d72 #1]) goto (6, 7)</pre>
</div>
<p>ん？ HashMapのprobeForLookupでSmiの他にDeletedKeySentinelが引っかかってますね。。</p>
<p>coreライブラリですが、、どうなってるんでしょうね。。 null値みたいなもんですか？</p>
<p>特にEqualityCompareにはnull型が入ってくる可能性があります。</p>
<p>Dart VMのEqualityはnull型を特別扱いしており、型情報を収集して最適化JITコンパイルする際に隠蔽しています。</p>
<p>そのためEquality中間表現は、nullが来ることを想定してアセンブラをEmitしています。</p>
<p>もしボトルネック部分にPolymorphicInstanceCallが来る場合は、クラスのコンストラクタ等でデータ型をあらかじめ変換した上で、</p>
<p>ボトルネックに単一型のみ来るようにすれば回避できます。</p>
</div>
<div class="section" id="left-shift">
<h2>Left Shift<a class="headerlink" href="#left-shift" title="Permalink to this headline">¶</a></h2>
<p>もう一つ、int型の左シフトに注意する必要があります。</p>
<p>CやJavaの言語仕様のつもりで左シフトを行うと痛い目にあいます。</p>
<p>例) shift.dart</p>
<div class="highlight-python"><pre>test(int n) {
  return n &lt;&lt; 1;
}

main() {
  var ret = 1;
  for (var i=0; i&lt;3000; i++) {
    ret = test(ret);
  }
  print(ret);
}

$ dart shift.dart
1230231922161117176931558813276752514640713895736833715766118029160058800614672948775360067838593459582429649254051804908512884180898236823585082482065348331234959350355845017413023320111360666922624728239756880416434478315693675013413090757208690376793296658810662941824493488451726505303712916005346747908623702673480919353936813105736620402352744776903840477883651100322409301983488363802930540482487909763484098253940728685132044408863734754271212592471778643949486688511721051561970432780747454823776808464180697103083861812184348565522740195796682622205511845512080552010310050255801589349645928001133745474220715013683413907542779063759833876101354235184245096670042160720629411581502371248008430447184842098610320580417992206662247328722122088513643683907670360209162653670641130936997002170500675501374723998766005827579300723253474890612250135171889174899079911291512399773872178519018229989376</pre>
</div>
<p>Dartのint型は上限がなく、左シフトで桁がスケールしていきます。</p>
<p>Dart VM ia32の場合、内部でSmi型(31bit Int型)からMint型(61bit Int型)からBigInt(上限なし Int型)と</p>
<p>自動的に型が切り替わります。</p>
<p>x64の場合、Smi型(61bit Int型)とBigInt型しかありません。</p>
<p>そのため、上述のPolymorphicInstanceCallに置換されやすいですし、そもそもBigInt型の演算は遅いです。</p>
<p>結果的にこうなる</p>
<div class="highlight-python"><pre>CheckClass:7(v4 IC[3: _Smi@0x36924d72 #1 | _Mint@0x36924d72 #1 | _Bigint@0x36924d72 #1]) env={ v4, a0, a1 } env={ v3, v4, v5 }
v20 &lt;- PolymorphicInstanceCall:12(&lt;&lt;, v4, v19 IC[3: _Smi@0x36924d72, _Smi@0x36924d72 #30 | _Mint@0x36924d72, _Smi@0x36924d72 #33 | _Bigint@0x36924d72, _Smi@0x36924d72 #937])</pre>
</div>
<p>型が3種類、[Smi, Smi]と[Mint, Smi]と[BigInt, Smi]になってます。</p>
<p>左シフトの使用には気をつけましょう。 特にJavaのアルゴリズムをポーティングした際に発生しやすいかも。。</p>
<p>左シフトで値のwrap aroundを期待するのであれば、以下の回避策があります。</p>
<ol class="arabic simple">
<li>シフト元の値をSmiやMintに切り詰めてから左シフトして、その後切り詰める。</li>
<li>xor演算への代替を検討する。</li>
</ol>
</div>
<div class="section" id="id1">
<h2>まとめ<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h2>
<ol class="arabic simple">
<li>PolymorphicInstanceCallはBinaryOpInstrの3倍遅い。</li>
<li>dartでは、int型で左シフトしない。</li>
</ol>
</div>
</div>


      </div>
      <div class="bottomnav">
      
        <p>
        «&#160;&#160;<a href="advent20121212.html">Dart VM Advent Calendar 2012 12/12</a>
        &#160;&#160;::&#160;&#160;
        <a class="uplink" href="../index.html">Contents</a>
        &#160;&#160;::&#160;&#160;
        <a href="advent20121214.html">Dart VM Advent Calendar 2012 12/14</a>&#160;&#160;»
        </p>

      </div>


    <div class="footer">
        &copy; Copyright 2012, nothingcosmos.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>

<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-15223787-5']);
  _gaq.push(['_trackPageview']);

  (function() {
   var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
   ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
   var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
   })();

</script>


  </body>
</html>