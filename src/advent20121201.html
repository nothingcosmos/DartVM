

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Dart VM Advent Calendar 2012 12/01 &mdash; Dart VM Overview 1.0 documentation</title>
    
    <link rel="stylesheet" href="../static/haiku.css" type="text/css" />
    <link rel="stylesheet" href="../static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/print.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../static/jquery.js"></script>
    <script type="text/javascript" src="../static/underscore.js"></script>
    <script type="text/javascript" src="../static/doctools.js"></script>
    <script type="text/javascript" src="../_static/theme_extras.js"></script>
    <link rel="top" title="Dart VM Overview 1.0 documentation" href="../index.html" />
    <link rel="up" title="Dart VM index" href="advent201212index.html" />
    <link rel="prev" title="Dart VM index" href="advent201212index.html" /> 
  </head>
  <body>
      <div class="header"><h1 class="heading"><a href="../index.html">
          <span>Dart VM Overview 1.0 documentation</span></a></h1>
        <h2 class="heading"><span>Dart VM Advent Calendar 2012 12/01</span></h2>
      </div>
      <div class="topnav">
      
        <p>
        «&#160;&#160;<a href="advent201212index.html">Dart VM index</a>
        &#160;&#160;::&#160;&#160;
        <a class="uplink" href="../index.html">Contents</a>
        </p>

      </div>
      <div class="content">
        
        
  <div class="section" id="dart-vm-advent-calendar-2012-12-01">
<h1>Dart VM Advent Calendar 2012 12/01<a class="headerlink" href="#dart-vm-advent-calendar-2012-12-01" title="Permalink to this headline">¶</a></h1>
<p>これが最新のVMだ！</p>
<p>断じてV8からjavascript向け最適化を取り除いたVMではない。</p>
<img alt="../images/dart.png" src="../images/dart.png" />
<div class="section" id="dart-vm">
<h2>Dart VMの魅力<a class="headerlink" href="#dart-vm" title="Permalink to this headline">¶</a></h2>
<p>Dart VMの最大の魅力は、速さへのこだわりです。</p>
<p>既にV8より10倍高速に起動し、将来的には2倍高速に動作するのを目指しているようです。</p>
<p>ここ十年のVMとJITコンパイラ系の技術の進化は素晴らしくて、
JavaScriptにどのくらい性能向上できる余地が残っているのか、
何がボトルネックなのかが見えているのだと思います。</p>
<p>そして、その壁をECMAScriptの仕様改善により進化させていくことも可能だと思います。</p>
<p>私には、さらなる性能向上を目指したVMのDesignと、
性能向上を優先した上で柔軟な言語仕様を提供しようとしている
Dart VMとDartが非常に魅力的に映ります。</p>
</div>
<div class="section" id="id1">
<h2>Dart VMの性能<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h2>
<p>いくつかV8より高速に動作するベンチマークもぼちぼち出てきたようです。</p>
<img alt="../images/dart_bench.png" src="../images/dart_bench.png" />
<p>score表示であり、緑色が優れています。</p>
<p>DeltaBlueやRichardsは、octane-benchmarkにも含まれているもので、
以下のdart benchmark harnessから試すことができます。</p>
<p><a class="reference external" href="https://github.com/dart-lang/benchmark_harness">https://github.com/dart-lang/benchmark_harness</a></p>
<p>Dart VMは、上記にあげたいくつかのベンチマークで、V8よりも高速に動作するようです。</p>
<p>とはいえ、上記にあげた大部分はマクロベンチマークで、部分的な比較でしかないよう思います。</p>
<p>中規模のベンチマークであるoctaneに関しても、上記にあげた2つ以外は、V8のほうが速いと予想します。</p>
<p>現在のV8とDart VMを比較すると、文字列や乱数を使用するベンチマークは、V8のほうが高速なはずです。</p>
<p>Dart VMが高速に動作するケースは、Array(主にscalarlist)を使用するものや、
premitive型に落ちやすい要素が多いベンチマークなのかな？と思っています。</p>
</div>
<div class="section" id="vm">
<h2>VMの匠<a class="headerlink" href="#vm" title="Permalink to this headline">¶</a></h2>
<p>VMの匠、Lars Bak氏 26年ってすごいと思います。</p>
<p>氏と、最先端のVMチームの経験に学ばせていただこうかなと。。</p>
<p>この資料が詳しいです。</p>
<p><a class="reference external" href="http://www.dartlang.org/slides/2012/09/strangeloop/pushing-the-limits-of-web-browsers-lars-bak.pdf">http://www.dartlang.org/slides/2012/09/strangeloop/pushing-the-limits-of-web-browsers-lars-bak.pdf</a></p>
</div>
<div class="section" id="dart">
<h2>Dartの言語仕様<a class="headerlink" href="#dart" title="Permalink to this headline">¶</a></h2>
<p>dartの言語仕様をsmalltalkと比較した紹介資料です。 これがわかりやすい。</p>
<p><a class="reference external" href="http://www.dartlang.org/slides/2012/03/smalltalk-industry-conference/DARTtalk-20120319.pdf">http://www.dartlang.org/slides/2012/03/smalltalk-industry-conference/DARTtalk-20120319.pdf</a></p>
<p>気になるところは、</p>
<ol class="arabic simple">
<li>not support eval.</li>
</ol>
<blockquote>
<div>性能を優先した妥協点なのだと思います。</div></blockquote>
<ol class="arabic simple" start="2">
<li>Classes is not first class objects.</li>
</ol>
<blockquote>
<div><p>関数はfirst class objectです。</p>
<p>そのため、isolateのmessage passingも関数単位で記述します。</p>
<p>Classesをmessage passingできたら便利かもなーと、
isolateを書いていて思うことはありますね。</p>
</div></blockquote>
<ol class="arabic simple" start="3">
<li>mirror based reflection. Fields can’t be added dynamically.</li>
</ol>
<blockquote>
<div><p>動的に追加できたらjavascript似たりよったりで同じ問題が起こるように思います。</p>
<p>性能を優先した妥協点なのだと思います。</p>
</div></blockquote>
<p>個人的には、
List内包表記、pattern matching、eval、yield、型推論のような機能が欲しいですよね。。</p>
<p>大体はdartが発表された2011/11にdart discussionに突撃して、
そんな機能はないよ -&gt; dart言語設計センスない、、
と言われるところにつながっているのかも。</p>
</div>
</div>


      </div>
      <div class="bottomnav">
      
        <p>
        «&#160;&#160;<a href="advent201212index.html">Dart VM index</a>
        &#160;&#160;::&#160;&#160;
        <a class="uplink" href="../index.html">Contents</a>
        </p>

      </div>


    <div class="footer">
        &copy; Copyright 2012, nothingcosmos.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>

<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-15223787-5']);
  _gaq.push(['_trackPageview']);

  (function() {
   var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
   ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
   var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
   })();

</script>


  </body>
</html>